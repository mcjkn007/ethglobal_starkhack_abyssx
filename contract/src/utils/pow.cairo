use abyss_x::utils::math::{MathU8Trait};

pub trait PowTrait<T> {
    fn pow(b: T, n: u8)-> T;
}

impl PowImpl<T,+Drop<T>, +Copy<T>,+MulEq::<T>,+Into<u8,T>> of PowTrait<T> {
    fn pow(b: T, n: u8)->T{
        let mut b: T = b;
        let mut result: T = 1_u8.into();
        let mut n = n;
        loop {
            if (n % 2 != 0) {
                result *= b;
            }
            n /= 2;
            if (n == 0) {
                break;
            }
            b *= b;
        };
        return result;
    }
}
 

#[generate_trait]
impl Pow256Impl of Pow256Trait {
    fn fast_pow_2(n:u8)->u256{
        return match n {
            0 => 0x1,
            1 => 0x2,
            2 => 0x4,
            3 => 0x8,

            4 => 0x10,
            5 => 0x20,
            6 => 0x40,
            7 => 0x80,

            8 => 0x100,
            9 => 0x200,
            10 => 0x400,
            11 => 0x800,

            12 => 0x1000,
            13 => 0x2000,
            14 => 0x4000,
            15 => 0x8000,

            16 => 0x10000,
            17 => 0x20000,
            18 => 0x40000,
            19 => 0x80000,

            20 => 0x100000,
            21 => 0x200000,
            22 => 0x400000,
            23 => 0x800000,

            24 => 0x1000000,
            25 => 0x2000000,
            26 => 0x4000000,
            27 => 0x8000000,

            28 => 0x10000000,
            29 => 0x20000000,
            30 => 0x40000000,
            31 => 0x80000000,

            32 => 0x100000000,
            33 => 0x200000000,
            34 => 0x400000000,
            35 => 0x800000000,

            36 => 0x1000000000,
            37 => 0x2000000000,
            38 => 0x4000000000,
            39 => 0x8000000000,

            40 => 0x10000000000,
            41 => 0x20000000000,
            42 => 0x40000000000,
            43 => 0x80000000000,

            44 => 0x100000000000,
            45 => 0x200000000000,
            46 => 0x400000000000,
            47 => 0x800000000000,

            48 => 0x1000000000000,
            49 => 0x2000000000000,
            50 => 0x4000000000000,
            51 => 0x8000000000000,

            52 => 0x10000000000000,
            53 => 0x20000000000000,
            54 => 0x40000000000000,
            55 => 0x80000000000000,

            56 => 0x100000000000000,
            57 => 0x200000000000000,
            58 => 0x400000000000000,
            59 => 0x800000000000000,

            60 => 0x1000000000000000,
            61 => 0x2000000000000000,
            62 => 0x4000000000000000,
            63 => 0x8000000000000000,

            64 => 0x10000000000000000,
            65 => 0x20000000000000000,
            66 => 0x40000000000000000,
            67 => 0x80000000000000000,

            68 => 0x100000000000000000,
            69 => 0x200000000000000000,
            70 => 0x400000000000000000,
            71 => 0x800000000000000000,

            72 => 0x1000000000000000000,
            73 => 0x2000000000000000000,
            74 => 0x4000000000000000000,
            75 => 0x8000000000000000000,

            76 => 0x10000000000000000000,
            77 => 0x20000000000000000000,
            78 => 0x40000000000000000000,
            79 => 0x80000000000000000000,

            80 => 0x100000000000000000000,
            81 => 0x200000000000000000000,
            82 => 0x400000000000000000000,
            83 => 0x800000000000000000000,

            84 => 0x1000000000000000000000,
            85 => 0x2000000000000000000000,
            86 => 0x4000000000000000000000,
            87 => 0x8000000000000000000000,

            88 => 0x10000000000000000000000,
            89 => 0x20000000000000000000000,
            90 => 0x40000000000000000000000,
            91 => 0x80000000000000000000000,

            92 => 0x100000000000000000000000,
            93 => 0x200000000000000000000000,
            94 => 0x400000000000000000000000,
            95 => 0x800000000000000000000000,

            96 => 0x1000000000000000000000000,
            97 => 0x2000000000000000000000000,
            98 => 0x4000000000000000000000000,
            99 => 0x8000000000000000000000000,

            100 => 0x10000000000000000000000000,
            101 => 0x20000000000000000000000000,
            102 => 0x40000000000000000000000000,
            103 => 0x80000000000000000000000000,

            104 => 0x100000000000000000000000000,
            105 => 0x200000000000000000000000000,
            106 => 0x400000000000000000000000000,
            107 => 0x800000000000000000000000000,

            108 => 0x1000000000000000000000000000,
            109 => 0x2000000000000000000000000000,
            110 => 0x4000000000000000000000000000,
            111 => 0x8000000000000000000000000000,

            112 => 0x10000000000000000000000000000,
            113 => 0x20000000000000000000000000000,
            114 => 0x40000000000000000000000000000,
            115 => 0x80000000000000000000000000000,

            116 => 0x100000000000000000000000000000,
            117 => 0x200000000000000000000000000000,
            118 => 0x400000000000000000000000000000,
            119 => 0x800000000000000000000000000000,

            120 => 0x1000000000000000000000000000000,
            121 => 0x2000000000000000000000000000000,
            122 => 0x4000000000000000000000000000000,
            123 => 0x8000000000000000000000000000000,

            124 => 0x10000000000000000000000000000000,
            125 => 0x20000000000000000000000000000000,
            126 => 0x40000000000000000000000000000000,
            127 => 0x80000000000000000000000000000000,

            128 => 0x100000000000000000000000000000000,
            129 => 0x200000000000000000000000000000000,
            130 => 0x400000000000000000000000000000000,
            131 => 0x800000000000000000000000000000000,

            132 => 0x1000000000000000000000000000000000,
            133 => 0x2000000000000000000000000000000000,
            134 => 0x4000000000000000000000000000000000,
            135 => 0x8000000000000000000000000000000000,

            136 => 0x10000000000000000000000000000000000,
            137 => 0x20000000000000000000000000000000000,
            138 => 0x40000000000000000000000000000000000,
            139 => 0x80000000000000000000000000000000000,

            140 => 0x100000000000000000000000000000000000,
            141 => 0x200000000000000000000000000000000000,
            142 => 0x400000000000000000000000000000000000,
            143 => 0x800000000000000000000000000000000000,

            144 => 0x1000000000000000000000000000000000000,
            145 => 0x2000000000000000000000000000000000000,
            146 => 0x4000000000000000000000000000000000000,
            147 => 0x8000000000000000000000000000000000000,

            148 => 0x10000000000000000000000000000000000000,
            149 => 0x20000000000000000000000000000000000000,
            150 => 0x40000000000000000000000000000000000000,
            151 => 0x80000000000000000000000000000000000000,

            152 => 0x100000000000000000000000000000000000000,
            153 => 0x200000000000000000000000000000000000000,
            154 => 0x400000000000000000000000000000000000000,
            155 => 0x800000000000000000000000000000000000000,

            156 => 0x1000000000000000000000000000000000000000,
            157 => 0x2000000000000000000000000000000000000000,
            158 => 0x4000000000000000000000000000000000000000,
            159 => 0x8000000000000000000000000000000000000000,

            160 => 0x10000000000000000000000000000000000000000,
            161 => 0x20000000000000000000000000000000000000000,
            162 => 0x40000000000000000000000000000000000000000,
            163 => 0x80000000000000000000000000000000000000000,

            164 => 0x100000000000000000000000000000000000000000,
            165 => 0x200000000000000000000000000000000000000000,
            166 => 0x400000000000000000000000000000000000000000,
            167 => 0x800000000000000000000000000000000000000000,

            168 => 0x1000000000000000000000000000000000000000000,
            169 => 0x2000000000000000000000000000000000000000000,
            170 => 0x4000000000000000000000000000000000000000000,
            171 => 0x8000000000000000000000000000000000000000000,

            172 => 0x10000000000000000000000000000000000000000000,
            173 => 0x20000000000000000000000000000000000000000000,
            174 => 0x40000000000000000000000000000000000000000000,
            175 => 0x80000000000000000000000000000000000000000000,

            176 => 0x100000000000000000000000000000000000000000000,
            177 => 0x200000000000000000000000000000000000000000000,
            178 => 0x400000000000000000000000000000000000000000000,
            179 => 0x800000000000000000000000000000000000000000000,

            180 => 0x1000000000000000000000000000000000000000000000,
            181 => 0x2000000000000000000000000000000000000000000000,
            182 => 0x4000000000000000000000000000000000000000000000,
            183 => 0x8000000000000000000000000000000000000000000000,

            184 => 0x10000000000000000000000000000000000000000000000,
            185 => 0x20000000000000000000000000000000000000000000000,
            186 => 0x40000000000000000000000000000000000000000000000,
            187 => 0x80000000000000000000000000000000000000000000000,

            188 => 0x100000000000000000000000000000000000000000000000,
            189 => 0x200000000000000000000000000000000000000000000000,
            190 => 0x400000000000000000000000000000000000000000000000,
            191 => 0x800000000000000000000000000000000000000000000000,

            192 => 0x1000000000000000000000000000000000000000000000000,
            193 => 0x2000000000000000000000000000000000000000000000000,
            194 => 0x4000000000000000000000000000000000000000000000000,
            195 => 0x8000000000000000000000000000000000000000000000000,

            196 => 0x10000000000000000000000000000000000000000000000000,
            197 => 0x20000000000000000000000000000000000000000000000000,
            198 => 0x40000000000000000000000000000000000000000000000000,
            199 => 0x80000000000000000000000000000000000000000000000000,

            200 => 0x100000000000000000000000000000000000000000000000000,
            201 => 0x200000000000000000000000000000000000000000000000000,
            202 => 0x400000000000000000000000000000000000000000000000000,
            203 => 0x800000000000000000000000000000000000000000000000000,

            204 => 0x1000000000000000000000000000000000000000000000000000,
            205 => 0x2000000000000000000000000000000000000000000000000000,
            206 => 0x4000000000000000000000000000000000000000000000000000,
            207 => 0x8000000000000000000000000000000000000000000000000000,

            208 => 0x10000000000000000000000000000000000000000000000000000,
            209 => 0x20000000000000000000000000000000000000000000000000000,
            210 => 0x40000000000000000000000000000000000000000000000000000,
            211 => 0x80000000000000000000000000000000000000000000000000000,

            212 => 0x100000000000000000000000000000000000000000000000000000,
            213 => 0x200000000000000000000000000000000000000000000000000000,
            214 => 0x400000000000000000000000000000000000000000000000000000,
            215 => 0x800000000000000000000000000000000000000000000000000000,

            216 => 0x1000000000000000000000000000000000000000000000000000000,
            217 => 0x2000000000000000000000000000000000000000000000000000000,
            218 => 0x4000000000000000000000000000000000000000000000000000000,
            219 => 0x8000000000000000000000000000000000000000000000000000000,

            220 => 0x10000000000000000000000000000000000000000000000000000000,
            221 => 0x20000000000000000000000000000000000000000000000000000000,
            222 => 0x40000000000000000000000000000000000000000000000000000000,
            223 => 0x80000000000000000000000000000000000000000000000000000000,

            224 => 0x100000000000000000000000000000000000000000000000000000000,
            225 => 0x200000000000000000000000000000000000000000000000000000000,
            226 => 0x400000000000000000000000000000000000000000000000000000000,
            227 => 0x800000000000000000000000000000000000000000000000000000000,

            228 => 0x1000000000000000000000000000000000000000000000000000000000,
            229 => 0x2000000000000000000000000000000000000000000000000000000000,
            230 => 0x4000000000000000000000000000000000000000000000000000000000,
            231 => 0x8000000000000000000000000000000000000000000000000000000000,

            232 => 0x10000000000000000000000000000000000000000000000000000000000,
            233 => 0x20000000000000000000000000000000000000000000000000000000000,
            234 => 0x40000000000000000000000000000000000000000000000000000000000,
            235 => 0x80000000000000000000000000000000000000000000000000000000000,

            236 => 0x100000000000000000000000000000000000000000000000000000000000,
            237 => 0x200000000000000000000000000000000000000000000000000000000000,
            238 => 0x400000000000000000000000000000000000000000000000000000000000,
            239 => 0x800000000000000000000000000000000000000000000000000000000000,

            240 => 0x1000000000000000000000000000000000000000000000000000000000000,
            241 => 0x2000000000000000000000000000000000000000000000000000000000000,
            242 => 0x4000000000000000000000000000000000000000000000000000000000000,
            243 => 0x8000000000000000000000000000000000000000000000000000000000000,

            244 => 0x10000000000000000000000000000000000000000000000000000000000000,
            245 => 0x20000000000000000000000000000000000000000000000000000000000000,
            246 => 0x40000000000000000000000000000000000000000000000000000000000000,
            247 => 0x80000000000000000000000000000000000000000000000000000000000000,

            248 => 0x100000000000000000000000000000000000000000000000000000000000000,
            249 => 0x200000000000000000000000000000000000000000000000000000000000000,
            250 => 0x400000000000000000000000000000000000000000000000000000000000000,
            251 => 0x800000000000000000000000000000000000000000000000000000000000000,

            252 => 0x1000000000000000000000000000000000000000000000000000000000000000,
            253 => 0x2000000000000000000000000000000000000000000000000000000000000000,
            254 => 0x4000000000000000000000000000000000000000000000000000000000000000,
            255 => 0x8000000000000000000000000000000000000000000000000000000000000000,

            _ => panic!("error"),
        };
    }
    fn fast_pow_2_8(n:u8)->u256{
        if(n == 0){
            return 1;
        }else if(n == 8){
            return 0x100;
        }else if(n == 16){
            return 0x10000;
        }else if(n == 24){
            return 0x1000000;
        }else if(n == 32){
            return 0x100000000;
        }else if(n == 40){
            return 0x10000000000;
        }else if(n == 48){
            return 0x1000000000000;
        }else if(n == 56){
            return 0x100000000000000;
        }else if(n == 64){
            return 0x10000000000000000;
        }else if(n == 72){
            return 0x1000000000000000000;
        }else if(n == 80){
            return 0x100000000000000000000;
        }else if(n == 88){
            return 0x10000000000000000000000;
        }else if(n == 96){
            return 0x1000000000000000000000000;
        }else if(n == 104){
            return 0x100000000000000000000000000;
        }else if(n == 112){
            return 0x10000000000000000000000000000;
        }else if(n == 120){
            return 0x1000000000000000000000000000000;
        }else if(n == 128){
            return 0x100000000000000000000000000000000;
        }else if(n == 136){
            return 0x10000000000000000000000000000000000;
        }else if(n == 144){
            return 0x1000000000000000000000000000000000000;
        }else if(n == 152){
            return 0x100000000000000000000000000000000000000;
        }else if(n == 160){
            return 0x10000000000000000000000000000000000000000;
        }else if(n == 168){
            return 0x1000000000000000000000000000000000000000000;
        }else if(n == 176){
            return 0x100000000000000000000000000000000000000000000;
        }else if(n == 184){
            return 0x10000000000000000000000000000000000000000000000;
        }else if(n == 192){
            return 0x1000000000000000000000000000000000000000000000000;
        }else if(n == 200){
            return 0x100000000000000000000000000000000000000000000000000;
        }else if(n == 208){
            return 0x10000000000000000000000000000000000000000000000000000;
        }else if(n == 216){
            return 0x1000000000000000000000000000000000000000000000000000000;
        }else if(n == 224){
            return 0x100000000000000000000000000000000000000000000000000000000;
        }else if(n == 232){
            return 0x10000000000000000000000000000000000000000000000000000000000;
        }else if(n == 240){
            return 0x1000000000000000000000000000000000000000000000000000000000000;
        }else if(n == 248){
            return 0x100000000000000000000000000000000000000000000000000000000000000;
        }else{
            return 1;
        }
    }
}

#[generate_trait]
impl Pow128Impl of Pow128Trait {
    fn fast_pow_2(n:u8)->u128{
        return match n {
            0 => 0x1,
            1 => 0x2,
            2 => 0x4,
            3 => 0x8,
    
            4 => 0x10,
            5 => 0x20,
            6 => 0x40,
            7 => 0x80,
    
            8 => 0x100,
            9 => 0x200,
            10 => 0x400,
            11 => 0x800,
    
            12 => 0x1000,
            13 => 0x2000,
            14 => 0x4000,
            15 => 0x8000,
    
            16 => 0x10000,
            17 => 0x20000,
            18 => 0x40000,
            19 => 0x80000,
    
            20 => 0x100000,
            21 => 0x200000,
            22 => 0x400000,
            23 => 0x800000,
    
            24 => 0x1000000,
            25 => 0x2000000,
            26 => 0x4000000,
            27 => 0x8000000,
    
            28 => 0x10000000,
            29 => 0x20000000,
            30 => 0x40000000,
            31 => 0x80000000,
    
            32 => 0x100000000,
            33 => 0x200000000,
            34 => 0x400000000,
            35 => 0x800000000,
    
            36 => 0x1000000000,
            37 => 0x2000000000,
            38 => 0x4000000000,
            39 => 0x8000000000,
    
            40 => 0x10000000000,
            41 => 0x20000000000,
            42 => 0x40000000000,
            43 => 0x80000000000,
    
            44 => 0x100000000000,
            45 => 0x200000000000,
            46 => 0x400000000000,
            47 => 0x800000000000,
    
            48 => 0x1000000000000,
            49 => 0x2000000000000,
            50 => 0x4000000000000,
            51 => 0x8000000000000,
    
            52 => 0x10000000000000,
            53 => 0x20000000000000,
            54 => 0x40000000000000,
            55 => 0x80000000000000,
    
            56 => 0x100000000000000,
            57 => 0x200000000000000,
            58 => 0x400000000000000,
            59 => 0x800000000000000,
    
            60 => 0x1000000000000000,
            61 => 0x2000000000000000,
            62 => 0x4000000000000000,
            63 => 0x8000000000000000,
    
            64 => 0x10000000000000000,
            65 => 0x20000000000000000,
            66 => 0x40000000000000000,
            67 => 0x80000000000000000,
    
            68 => 0x100000000000000000,
            69 => 0x200000000000000000,
            70 => 0x400000000000000000,
            71 => 0x800000000000000000,
    
            72 => 0x1000000000000000000,
            73 => 0x2000000000000000000,
            74 => 0x4000000000000000000,
            75 => 0x8000000000000000000,
    
            76 => 0x10000000000000000000,
            77 => 0x20000000000000000000,
            78 => 0x40000000000000000000,
            79 => 0x80000000000000000000,
    
            80 => 0x100000000000000000000,
            81 => 0x200000000000000000000,
            82 => 0x400000000000000000000,
            83 => 0x800000000000000000000,
    
            84 => 0x1000000000000000000000,
            85 => 0x2000000000000000000000,
            86 => 0x4000000000000000000000,
            87 => 0x8000000000000000000000,
    
            88 => 0x10000000000000000000000,
            89 => 0x20000000000000000000000,
            90 => 0x40000000000000000000000,
            91 => 0x80000000000000000000000,
    
            92 => 0x100000000000000000000000,
            93 => 0x200000000000000000000000,
            94 => 0x400000000000000000000000,
            95 => 0x800000000000000000000000,
    
            96 => 0x1000000000000000000000000,
            97 => 0x2000000000000000000000000,
            98 => 0x4000000000000000000000000,
            99 => 0x8000000000000000000000000,
    
            100 => 0x10000000000000000000000000,
            101 => 0x20000000000000000000000000,
            102 => 0x40000000000000000000000000,
            103 => 0x80000000000000000000000000,
    
            104 => 0x100000000000000000000000000,
            105 => 0x200000000000000000000000000,
            106 => 0x400000000000000000000000000,
            107 => 0x800000000000000000000000000,
    
            108 => 0x1000000000000000000000000000,
            109 => 0x2000000000000000000000000000,
            110 => 0x4000000000000000000000000000,
            111 => 0x8000000000000000000000000000,
    
            112 => 0x10000000000000000000000000000,
            113 => 0x20000000000000000000000000000,
            114 => 0x40000000000000000000000000000,
            115 => 0x80000000000000000000000000000,
    
            116 => 0x100000000000000000000000000000,
            117 => 0x200000000000000000000000000000,
            118 => 0x400000000000000000000000000000,
            119 => 0x800000000000000000000000000000,
    
            120 => 0x1000000000000000000000000000000,
            121 => 0x2000000000000000000000000000000,
            122 => 0x4000000000000000000000000000000,
            123 => 0x8000000000000000000000000000000,
    
            124 => 0x10000000000000000000000000000000,
            125 => 0x20000000000000000000000000000000,
            126 => 0x40000000000000000000000000000000,
            127 => 0x80000000000000000000000000000000,
    
            _ => panic!("error"),
        };
    }
}
 
#[generate_trait]
impl Pow64Impl of Pow64Trait {
    fn fast_pow_2(n:u8)->u64{
        return match n {
            0 => 0x1,
            1 => 0x2,
            2 => 0x4,
            3 => 0x8,
    
            4 => 0x10,
            5 => 0x20,
            6 => 0x40,
            7 => 0x80,
    
            8 => 0x100,
            9 => 0x200,
            10 => 0x400,
            11 => 0x800,
    
            12 => 0x1000,
            13 => 0x2000,
            14 => 0x4000,
            15 => 0x8000,
    
            16 => 0x10000,
            17 => 0x20000,
            18 => 0x40000,
            19 => 0x80000,
    
            20 => 0x100000,
            21 => 0x200000,
            22 => 0x400000,
            23 => 0x800000,
    
            24 => 0x1000000,
            25 => 0x2000000,
            26 => 0x4000000,
            27 => 0x8000000,
    
            28 => 0x10000000,
            29 => 0x20000000,
            30 => 0x40000000,
            31 => 0x80000000,
    
            32 => 0x100000000,
            33 => 0x200000000,
            34 => 0x400000000,
            35 => 0x800000000,
    
            36 => 0x1000000000,
            37 => 0x2000000000,
            38 => 0x4000000000,
            39 => 0x8000000000,
    
            40 => 0x10000000000,
            41 => 0x20000000000,
            42 => 0x40000000000,
            43 => 0x80000000000,
    
            44 => 0x100000000000,
            45 => 0x200000000000,
            46 => 0x400000000000,
            47 => 0x800000000000,
    
            48 => 0x1000000000000,
            49 => 0x2000000000000,
            50 => 0x4000000000000,
            51 => 0x8000000000000,
    
            52 => 0x10000000000000,
            53 => 0x20000000000000,
            54 => 0x40000000000000,
            55 => 0x80000000000000,
    
            56 => 0x100000000000000,
            57 => 0x200000000000000,
            58 => 0x400000000000000,
            59 => 0x800000000000000,
    
            60 => 0x1000000000000000,
            61 => 0x2000000000000000,
            62 => 0x4000000000000000,
            63 => 0x8000000000000000,

            _ => panic!("error"),
        };
    }
}

#[generate_trait]
impl Pow32Impl of Pow32Trait {
    fn fast_pow_2(n:u8)->u32{
        return match n {
            0 => 0x1,
            1 => 0x2,
            2 => 0x4,
            3 => 0x8,
    
            4 => 0x10,
            5 => 0x20,
            6 => 0x40,
            7 => 0x80,
    
            8 => 0x100,
            9 => 0x200,
            10 => 0x400,
            11 => 0x800,
    
            12 => 0x1000,
            13 => 0x2000,
            14 => 0x4000,
            15 => 0x8000,
    
            16 => 0x10000,
            17 => 0x20000,
            18 => 0x40000,
            19 => 0x80000,
    
            20 => 0x100000,
            21 => 0x200000,
            22 => 0x400000,
            23 => 0x800000,
    
            24 => 0x1000000,
            25 => 0x2000000,
            26 => 0x4000000,
            27 => 0x8000000,
    
            28 => 0x10000000,
            29 => 0x20000000,
            30 => 0x40000000,
            31 => 0x80000000,
     
            _ => panic!("error"),
        };
    }
}

#[generate_trait]
impl Pow16Impl of Pow16Trait {
    fn fast_pow_2(n:u8)->u16{
        return match n {
            0 => 0x1,
            1 => 0x2,
            2 => 0x4,
            3 => 0x8,
    
            4 => 0x10,
            5 => 0x20,
            6 => 0x40,
            7 => 0x80,
    
            8 => 0x100,
            9 => 0x200,
            10 => 0x400,
            11 => 0x800,
    
            12 => 0x1000,
            13 => 0x2000,
            14 => 0x4000,
            15 => 0x8000,
            _ => panic!("error"),
        };
    }
}